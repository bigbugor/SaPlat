#include("/template/common/layout/_page_layout.html")
#@layout()

#define css()
<style>

</style>
#end

#define js()
<script type="text/javascript">
    layui.use(['form', 'layer', 'laydate'], function () {
        var layer = layui.layer
            , $ = layui.jquery
            , form = layui.form
            , laydate = layui.laydate;
        laydate.render({
            elem: '#affectedGroup.worktime'
        });
        laydate.render({
            elem: '#affectedGroup.birthday'
        });


        form.on('submit(sub)', function (data) {
            util.sendAjax({
                type: 'POST',
                url: '#(ctxPath)/app/person/affectedGroupVerify',
                data: $.param(data.field),
                loadFlag: true,
                success: function (data) {
                    layer.msg('上传成功，请耐心等待审核！');
                    window.location.reload();
                },
                error: function (data) {
                    console.log(data);
                }
            });
            return false;

        });
        $(function () {
            var test = "#(affectedGroup.nation)";
            if (test.length > 0) {
                $("input").prop("disabled", "disabled").addClass("layui-disabled");
                $("textarea").prop("disabled", "disabled").addClass("layui-disabled");
                $("select").prop("disabled", "disabled").addClass("layui-disabled");
                $(".layui-select-title").unbind();
                $("option").prop("disabled", "disabled").addClass("layui-disabled");
                $("#sub").hide();
            }
        });

        $('#back').click(function () {
            history.back(-1);
        })
    });


</script>
#end

#define content()
<div class="layui-fluid">
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
        <legend>影响群体</legend>
    </fieldset>
    <form class="layui-form layui-form-pane" action="">
        <div class="layui-form-item">
            <label class="layui-form-label" for="person.name">姓名</label>
            <div class="layui-input-inline">
                <input type="text" name="person.name" id="person.name" value="#(person.name)" required
                       disabled="disabled" class="layui-input layui-disabled"
                       lay-verify="required" placeholder="请输入姓名" autocomplete="off">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.othername">曾用名</label>
            <div class="layui-input-inline">
                <input type="text" name="affectedGroup.othername" id="affectedGroup.othername"
                       value="#(affectedGroup.othername)"
                       placeholder="请输入曾用名" autocomplete="off" class="layui-input ">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.mail">邮箱</label>
            <div class="layui-input-inline">
                <input type="email" name="affectedGroup.mail" id="affectedGroup.mail" lay-verify="required"
                       placeholder="请输入邮箱" autocomplete="off" class="layui-input layui-disabled" value="#(user.email)"
                       disabled="disabled">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.name">名称</label>
            <div class="layui-input-inline">
                <input type="text" name="affectedGroup.name" id="affectedGroup.name" required lay-verify="required"
                       value="#(affectedGroup.name)"
                       placeholder="请输入影响群体名称" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.nation">民族</label>
            <div class="layui-input-inline">
                <input type="text" name="affectedGroup.nation" id="affectedGroup.nation" lay-verify="required"
                       value="#(affectedGroup.nation)"
                       placeholder="请输入民族" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.residence">长期居住地址</label>
            <div class="layui-input-block">
                <input type="text" name="affectedGroup.residence" id="affectedGroup.residence" lay-verify="required"
                       value="#(affectedGroup.residence)"
                       autocomplete="off" placeholder="请输入..." class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.nationality">国籍</label>
            <div class="layui-input-inline">
                <input type="text" name="affectedGroup.nationality" id="affectedGroup.nationality" lay-verify="required"
                       value="#(affectedGroup.nationality)"
                       placeholder="请输入国籍" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.census">户籍</label>
            <div class="layui-input-inline">
                <input type="text" name="affectedGroup.census" id="affectedGroup.census" lay-verify="required"
                       value="#(affectedGroup.census)"
                       placeholder="请输入国籍" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.education">学历</label>
            <div class="layui-input-inline">
                <input type="text" name="affectedGroup.education" id="affectedGroup.education" lay-verify="required"
                       value="#(affectedGroup.education)"
                       placeholder="请输入学历" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.workstate">在职状态</label>
            <div class="layui-input-inline">
                <select name="affectedGroup.workstate" id="affectedGroup.workstate">
                    <option value="">请选择</option>
                    #if(affectedGroup.wokstate == 0)
                    <option value="1">在职</option>
                    <option value="0" selected="">离职</option>
                    #else
                    <option value="1" selected="">在职</option>
                    <option value="0">离职</option>
                    #end
                </select>
            </div>
        </div>


        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label" for="affectedGroup.birthday">出生日期</label>
                <div class="layui-input-block">
                    <input type="date" name="affectedGroup.birthday" id="affectedGroup.birthday"
                           value="#(affectedGroup.birthday)" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.politics">政治面貌</label>
            <div class="layui-input-inline">
                <input type="text" name="affectedGroup.politics" id="affectedGroup.politics" lay-verify="required"
                       value="#(affectedGroup.politics)"
                       placeholder="请输入政治面貌" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.occupation">职业</label>
            <div class="layui-input-inline">
                <input type="text" name="affectedGroup.occupation" id="affectedGroup.occupation" lay-verify="required"
                       value="#(affectedGroup.occupation)"
                       placeholder="请输入政治面貌" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.maritalstatus">婚姻状况</label>
            <div class="layui-input-inline">
                <select name="affectedGroup.maritalstatus" id="affectedGroup.maritalstatus">
                    #if(affectedGroup.maritalstatus == 0)
                    <option value="1">请选择</option>
                    <option value="1">已婚</option>
                    <option value="0" selected="">未婚</option>
                    #else
                    <option value="1">请选择</option>
                    <option value="1" selected="">已婚</option>
                    <option value="0">未婚</option>
                    #end
                </select>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label" for="affectedGroup.children">子女情况</label>
            <div class="layui-input-block">
                <input type="text" name="affectedGroup.children" id="affectedGroup.children" autocomplete="off"
                       value="#(affectedGroup.children)" placeholder="请输入标题" class="layui-input">
            </div>

        </div>


        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label" for="affectedGroup.worktime">工作时间</label>
                <div class="layui-input-block">
                    <input type="date" name="affectedGroup.worktime" id="affectedGroup.worktime" autocomplete="off"
                           value="#(affectedGroup.worktime)" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label" for="affectedGroup.department">部门名称</label>
                <div class="layui-input-block">
                    <input type="text" name="affectedGroup.department" id="affectedGroup.department" autocomplete="off"
                           value="#(affectedGroup.department)" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label" for="affectedGroup.duty">职务</label>
                <div class="layui-input-block">
                    <input type="text" name="affectedGroup.duty" id="affectedGroup.duty" autocomplete="off"
                           value="#(affectedGroup.duty)" class="layui-input">
                </div>
            </div>

        </div>

        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label" for="affectedGroup.resume">工作简历</label>
            <div class="layui-input-block">
                <textarea placeholder="请输入内容" name="affectedGroup.resume" id="affectedGroup.resume"
                          class="layui-textarea">#(affectedGroup.project)</textarea>
            </div>
        </div>


        <div class="layui-form-item">
            <button class="layui-btn" lay-filter="sub" lay-submit id="sub">
                保存
            </button>
            <button class="layui-btn" id="back">
                返回
            </button>
        </div>
    </form>
    <hr>
</div>

#end