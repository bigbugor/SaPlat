#include("/template/common/layout/_page_layout.html")
#@layout()

#define css()
<style>

</style>
#end

#define js()
<script type="text/javascript">
    layui.use(['form', 'layer'], function () {
        var layer = layui.layer
            , $ = layui.jquery
            , form = layui.form;


        form.on('submit(sub)', function (data) {
            util.sendAjax({
                type: 'POST',
                url: '#(ctxPath)/app/person/update',
                data: $.param(data.field),
                loadFlag: true,
                success: function (data) {
                    layer.msg('编辑成功');
                    $(".layui-btn").addClass("layui-hide");
                    $("#edit").removeClass("layui-hide");
                    $(":input").addClass("layui-disabled").prop("disabled","disabled");
                    setTimeout(function () {
                        return true;
                    }, 3000);
                },
                error: function (data) {
                    console.log(data);
                }
            });
            return false;
        });

        $('#edit').click(function () {
            $(":input[disabled='disabled']").removeClass("layui-disabled").removeProp("disabled");
            $(".layui-btn").removeClass("layui-hide");
            $(this).addClass("layui-hide");
            return false;
        });
    });


</script>
#end

#define content()
<div class="layui-fluid">
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
        <legend>个人资料</legend>
    </fieldset>


    <form id="person" class="layui-form x-center" action="">
        <div class="layui-form-pane">

            <div class="layui-form-item">
                <label class="layui-form-label">账号(名称)</label>
                <div class="layui-input-inline">
                    <p>#(person.name)</p>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">性别</label>
                <div class="layui-input-inline">
                    <p>#(person.sex)</p>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label" for="person.age">年龄</label>
                <div class="layui-input-inline">
                    <input type="number" id="person.age" name="person.age" value="#(person.age)"
                           class="layui-input layui-disabled" disabled="disabled" required
                    />
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label" for="person.phone">电话号码</label>
                <div class="layui-input-inline">
                    <input type="tel" id="person.phone" name="person.phone" value="#(person.phone)"
                           class="layui-input layui-disabled" disabled="disabled" required
                    />
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label" for="user.email">邮箱</label>
                <div class="layui-input-inline">
                    <input type="email" id="user.email" name="user.email" value="#(user.email)"
                           class="layui-input layui-disabled" disabled="disabled" required
                    />
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label" for="person.addr">地址</label>
                <div class="layui-input-inline">
                    <input type="text" id="person.addr" name="person.addr" value="#(person.addr)"
                           class="layui-input layui-disabled" disabled="disabled" required
                    />
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn layui-hide" lay-submit lay-filter="sub">立即提交</button>
                    <button class="layui-btn layui-btn-warm layui-hide" id="reset">取消</button>
                    <button class="layui-btn layui-btn-normal" id="edit">编辑</button>
                </div>
            </div>
        </div>
    </form>
    <hr>
</div>

#end