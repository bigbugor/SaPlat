#include("/template/common/layout/_page_layout.html")
#@layout()

#define css()
<link rel="stylesheet" href="#(RESOURCE_HOST)/static/css/zTreeStyle/zTreeStyle.css" type="text/css">
<style>
    .pdfobject-container {
        width: 48%;
        height: 100%;
        padding: 5em 0;
    }
    html,body{
        height:98%;
    }
</style>
#end

#define js()
<script type="text/javascript" src="#(RESOURCE_HOST)/static/js/ztree/jquery.ztree.all.min.js"></script>
<script type="text/javascript" src="#(RESOURCE_HOST)/static/js/pdf/pdfobject.min.js"></script>
<script type="text/javascript" src="#(RESOURCE_HOST)/static/js/pdf/pdfjs/core/pdf.js"></script>
<script type="text/javascript">
    var url=document.getElementById("pdfviewer").innerText;
    var options = {
        forcePDFJS: true,
        PDFJS_URL: "/static/js/pdf/pdfjs/web/viewer.html"
    };
    PDFObject.embed(url,"#pdfviewer",options);
    var setting = {
        data: {
            simpleData: {
                enable: true
            }
        },
        callback: {
            onClick: zTreeOnClick
        },
        view:{
            showTitle:true
        }
    };

    var pid = 0;

    //var reloadTable;
    function zTreeOnClick(event, treeId, treeNode) {
        PDFObject.embed(treeNode.title,"#pdfviewer",options);
    }

    function zTreeReload() {
        util.sendAjax ({
            url : '#(ctxPath)/app/ass_review/fileTree',
            notice: false,
            success : function(data){
                $.fn.zTree.init($("#tree"), setting, data.data);
            }
        })
    }

    $(document).ready(function(){
        zTreeReload();
    });

</script>
#end

#define content()
<div class="layui-fluid" style="height:100%;">
    <div class="layui-row" style="height:100%;">
        <div class="layui-col-md2" style="overflow:auto;height:100%;">
            <ul id="tree" class="ztree" style="height:100%;"></ul>
        </div>
        <div id="pdfviewer" class="layui-col-md6" style="height:100%;">#(pdfURL)</div>
    </div>
</div>
#end